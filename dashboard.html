<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FinTwin | Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="logo">FinTwin</div>

    <div class="user-info">
        <span id="userName">TEST</span>
        <button onclick="logout()">Logout</button>
    </div>
</nav>

<!-- DASHBOARD -->
<section class="dashboard">

    <h1>Welcome back üëã</h1>
<p id="userType"></p>


<!-- SNAPSHOT -->
<div class="snapshot">
    <div class="summary-card">
        <h3>Monthly Income</h3>
        <p id="incomeAmount">‚Çπ0</p>
    </div>
    <div class="summary-card">
        <h3>Monthly Expenses</h3>
        <p id="expenseAmount">‚Çπ0</p>
    </div>
    <div class="summary-card">
        <h3>Monthly Savings</h3>
        <p id="savingsAmount">‚Çπ0</p>
    </div>
</div>

<div id="overspendAlert" class="alert-banner" style="display: none;">
    ‚ö†Ô∏è You have exceeded your monthly budget!
</div>


<!-- GOALS -->
<h2 class="section-title">üéØ Your Goals</h2>
<div class="goals" id="goalsContainer"></div>

<div class="goal-form">
  <input type="text" id="goalName" placeholder="Goal name (e.g. New Car)" />
  <input type="number" id="goalTarget" placeholder="Target amount (‚Çπ)" />
  <button id="addGoalBtn">Add Goal</button>
</div>


<!-- AI INSIGHTS -->
<h2 class="section-title">üß† Smart Insights</h2>
<section class="insight-section">
    <ul id="insightList"></ul>
</section>




<!-- QUICK ACTIONS -->

<h2 class="section-title">‚ö° Quick Actions</h2>
<div class="actions">
    <button id="quickAddExpense">Add Expense</button>
    <button id="quickCreateGoal">Create Goal</button>
    <button id="quickViewInvestments">View Investments</button>
    <button class="quick-btn" onclick="openIncomeModal()">
    üí∞ Add Monthly Income
</button>

</div>


</section>

<main>
    <section class="expense-section">
    <h2>Track Your Expenses</h2>
    <section class="statement-upload">
    <h2>üè¶ Upload Bank Statement</h2>
    <p class="hint">
        Upload your bank statement (CSV or PDF) to auto-analyze your spending.
    </p>

    <input type="file" id="statementInput" accept=".csv,.pdf" />
    <button id="uploadStatementBtn">Analyze Statement</button>

    <p id="uploadStatus" class="status-text"></p>
</section>
<div id="previewSection" class="preview-box hidden">
    <h3>üìÑ Transaction Preview</h3>

    <table id="previewTable">
        <thead>
            <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Type</th>
            </tr>
        </thead>
        <tbody id="previewBody"></tbody>
    </table>

    <button id="confirmImportBtn">‚úÖ Confirm Import</button>
</div>

    <form id="expenseForm">
        <input type="text" id="expenseTitle" placeholder="Expense title (e.g. Food)" required />
        <input type="number" id="expenseInputAmount" placeholder="Amount (‚Çπ)" required />
        
        <select id="expenseCategory" required>
            <option value="">Select Category</option>
            <option value="Food">Food</option>
            <option value="Rent">Rent</option>
            <option value="Travel">Travel</option>
            <option value="Shopping">Shopping</option>
            <option value="Entertainment">Entertainment</option>
            <option value="Subscriptions">Subscriptions</option>
        </select>

        <button type="submit">Add Expense</button>
    </form>

    <div class="expense-summary">
        <h3>Total Spent: ‚Çπ<span id="totalExpense">0</span></h3>
    </div>

    <ul id="expenseList"></ul>
</section>



<div class="dashboard-row">

    <!-- Monthly Budget -->
    <div class="budget-card">
        <h3>Monthly Budget</h3>
        <input type="number" id="budgetInput" placeholder="Enter budget amount" />
        <button id="saveBudgetBtn">Save Budget</button>
        <p id="budgetDisplay"></p>
        <div class="budget-progress">
            <div class="progress-info" id="progressText"></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

    </div>

    <!-- Monthly Expense Breakdown -->
    <div class="chart-container">
        <h3>Monthly Expense Breakdown</h3>
        <canvas id="expenseChart"></canvas>
    </div>

</div>


<!-- SUMMARY SECTION -->
<section class="summary-section">
    <div class="summary-cards">
        <div class="card">
            <h3>Total Expenses</h3>
            <p id="totalExpensesValue">‚Çπ0</p>
        </div>

        <div class="card">
            <h3>Budget Left</h3>
            <p id="budgetLeftValue">‚Çπ0</p>
        </div>

        <div class="card">
            <h3>Top Category</h3>
            <p id="topCategoryValue">-</p>
        </div>
    </div>
</section>





<section class="insight-section">
    <h2>Spending Insights</h2>
    <ul id="spendingInsightList"></ul>
</section>

</main>
<div id="incomeModal" class="modal hidden">
    <div class="modal-content">
        <h3>Enter Monthly Income</h3>
        <input type="number" id="incomeInput" placeholder="e.g. 50000" />
        <div class="modal-actions">
            <button onclick="saveIncome()">Save</button>
            <button onclick="closeIncomeModal()">Cancel</button>
        </div>
    </div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script>
  pdfjsLib.GlobalWorkerOptions.workerSrc =
    "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js";
</script>

<script src="dashboard.js"></script>


</body>
</html>
